<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Narrative Viz Project - Zubair Lalani</title>

    <script src='https://d3js.org/d3.v5.min.js'></script>
    <script src="scripts/index.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-annotation/2.5.1/d3-annotation.min.js"></script>
    
    <link rel="stylesheet" href="styles/style.css"> 
    <style>
        #wordcloud {
            font-family: "Arial", sans-serif;
            width: 800px;
            height: 500px;
            margin: auto;
            border: 1px solid #ccc;
        }
    </style>

</head>

<body>
    <p>
        We see that "affection" and "achievement" seem to be the biggest contributors overall towards happiness for our participants. But, does that hold true across different age groups? Also, is there a difference in what makes us happy in the short term versus the long term?
        Explore for yourself using the "Select Age Group" dropdown and "Split by Time Period" checkbox. 
        
        <p>
            When you select an age group, it will filter the data so that only responses from participants within those age groups are aggregated. The "All other ages" options is for any ages that didn't fall into the other categories. Note that the data under that option is more likely to be inaccurate and due to misinputs from the participants. 
        </p>
       

        <p>
            When participants responded to the survey, they were asked for happy moments within the past 24 hours or within the past 3 months. The Split By Time Period, will split each of the 7 categories by these reflection time periods.
        </p>> 
    </p>

    <div>
        <label for="ageDropdown">Select Age Group:</label>
        <select id="ageDropdown">
            <option value="all">All Ages</option>
            <option value="12-18">12-18</option>
            <option value="19-25">19-25</option>
            <option value="26-35">26-35</option>
            <option value="36-50">36-50</option>
            <option value="51-90">51-90</option>
            <option value="misc">All other ages</option>
        </select>
    </div>

    <div>
        <label for="splitTime">Split by Time Period:</label>
        <input type="checkbox" id="splitTime" checked>
    </div>

    <div id="chart"></div>
    <script>
        
        const splitTimeParam = d3.select("#splitTime").property("checked");

        chart(3, splitByTime=splitTimeParam);

        d3.select("#ageDropdown").on("change", function() {
            const chartSelection = d3.select("#chart").selectAll("*").remove();
            const selectedAgeGroup = d3.select(this).property("value");
            const splitBy = d3.select("#splitTime").property("checked");
            chart(3, splitByTime=splitBy, plotWords=false, numWords=40, age=selectedAgeGroup);
        });

        d3.select("#splitTime").on("change", function() {
            const chartSelection = d3.select("#chart").selectAll("*").remove();
            const splitBy = d3.select("#splitTime").property("checked");
            const selectedAgeGroup = d3.select("#ageDropdown").property("value");

            chart(3, splitByTime=splitBy, plotWords=false, numWords=40, age=selectedAgeGroup);
        });

    </script>

    <button id="goPrev">Previous</button>
    <script>
        document.getElementById("goPrev").addEventListener("click", function() {
            window.location.href = "scene2.html";
        });
    </script>

</body>
